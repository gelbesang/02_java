<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="mybatis.emp.mapper.EmpMapper">
	<!-- emp 테이블 전체 목록 조회  -->
    <select id="selectAll" resultType="map">
   		SELECT e.empno "사번"
    		 , e.ename "이름"
     		 , e.job
     		 , e.mgr
     		 , TO_CHAR(e.hiredate, 'YYYY-MM-DD') hiredate
     		 , e.comm
     		 , e.sal
     		 , e.deptno
  		  FROM emp e
  		 ORDER BY e.empno
    </select>
    
    <!-- emp 테이블에서 사번으로 1명의 정보 조회 -->
    <select id="selectEmp" parameterType="int" resultType="map">
    	SELECT e.empno
     		 , e.ename
    		 , e.job
    		 , e.mgr
    		 , e.hiredate
    		 , e.comm
    		 , e.sal
    		 , e.deptno
 		  FROM emp e
 		 WHERE e.empno = #{value}
 		 <!-- #{value}는 prepared에서 ?와 같은 역할 -->
 		 <!-- 쿼리 실행시 전달 값이 1개이며 -->
 		 <!-- 기본 형 값 / String 값 일때만 사용 가능한 -->
 		 <!-- mybatis 프레임 워크 자체 변수 -->
    </select>
    
    <!-- EMP 테이블에 직원 정보 1건 입력 -->
    <insert id="insert" parameterType="map">
    	INSERT INTO EMP e
      		 ( e.empno
     		 , e.ename
     		 , e.hiredate
     		 , e.job
     		 )
 		VALUES
     		 ( #{empno}
    	     , #{ename}
     		 , sysdate
     		 , #{job}
     		 )
    </insert>
    <!-- EMP 테이블의 직원 정보 1건을 수정하는 쿼리 -->
    <update id="update" parameterType="map">
    UPDATE EMP e
   		SET e.ename = #{ENAME}
     	  , e.job = #{JOB}
    	  , e.mgr = #{MGR}
   		  , e.hiredate = #{HIREDATE}
   		  , e.sal = #{SAL}
   		  , e.comm = #{COMM}
   		  , e.deptno = #{DEPTNO}
	  WHERE e.empno = #{EMPNO}
    
         </update>
</mapper>